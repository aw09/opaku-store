import{S as Q,i as U,s as j,k as v,a as R,q as A,l as y,m as x,c as B,r as P,h as w,n as d,Q as J,b as z,I as o,J as F,u as M,B as N,o as K}from"../../../../chunks/index-0cd3a35d.js";import{b as W,l as O,c as X,r as Y,d as Z,g as $,e as tt}from"../../../../chunks/firebase-c0b386ca.js";import{u as et}from"../../../../chunks/state-cc95885c.js";function at(r){let e,a,i,m,g,s,c,_=r[0].content.name+"",p,n,u,E,h=r[0].content.price.toLocaleString()+"",C,S,f,q=r[1]?"Add to Cart":"Login first",D,I,L,T,V;return{c(){e=v("div"),a=v("img"),g=R(),s=v("div"),c=v("h1"),p=A(_),n=R(),u=v("p"),E=A("Rp "),C=A(h),S=R(),f=v("button"),D=A(q),this.h()},l(l){e=y(l,"DIV",{class:!0});var t=x(e);a=y(t,"IMG",{class:!0,src:!0,alt:!0}),g=B(t),s=y(t,"DIV",{class:!0});var b=x(s);c=y(b,"H1",{class:!0});var G=x(c);p=P(G,_),G.forEach(w),n=B(b),u=y(b,"P",{class:!0});var k=x(u);E=P(k,"Rp "),C=P(k,h),k.forEach(w),S=B(b),f=y(b,"BUTTON",{class:!0});var H=x(f);D=P(H,q),H.forEach(w),b.forEach(w),t.forEach(w),this.h()},h(){d(a,"class","h-48 w-48"),J(a.src,i=r[0].content.image)||d(a,"src",i),d(a,"alt",m=r[0].content.name+"-image"),d(c,"class","font-bold text-xl text-black"),d(u,"class","text-2xl"),f.disabled=I=!r[1],d(f,"class",L="mt-4 py-2 w-full rounded-lg text-center font-bold "+(r[1]?"text-white bg-green-400":"text-gray-500 bg-gray-200")),d(s,"class","flex flex-col"),d(e,"class","flex py-4 gap-4")},m(l,t){z(l,e,t),o(e,a),o(e,g),o(e,s),o(s,c),o(c,p),o(s,n),o(s,u),o(u,E),o(u,C),o(s,S),o(s,f),o(f,D),T||(V=F(f,"click",r[2]),T=!0)},p(l,[t]){t&1&&!J(a.src,i=l[0].content.image)&&d(a,"src",i),t&1&&m!==(m=l[0].content.name+"-image")&&d(a,"alt",m),t&1&&_!==(_=l[0].content.name+"")&&M(p,_),t&1&&h!==(h=l[0].content.price.toLocaleString()+"")&&M(C,h),t&2&&q!==(q=l[1]?"Add to Cart":"Login first")&&M(D,q),t&2&&I!==(I=!l[1])&&(f.disabled=I),t&2&&L!==(L="mt-4 py-2 w-full rounded-lg text-center font-bold "+(l[1]?"text-white bg-green-400":"text-gray-500 bg-gray-200"))&&d(f,"class",L)},i:N,o:N,d(l){l&&w(e),T=!1,V()}}}function st(r,e,a){let{data:i}=e,m,g;et.subscribe(n=>{a(1,g=n)});const s={item_id:i.id,item_name:i.content.name,price:i.content.price},c={...s,quantity:1};K(()=>{m=W(X),O(m,"select_item",s)});const _=()=>{g||(window.location.href="/login");const n={...c,image:i.content.image},u=Y(Z,"cart/"+g.uid+"/"+c.item_id);$(u).then(E=>{E.val()||(tt(u,n),p())})},p=()=>{const n={currency:"IDR",value:c.price,items:[c]};O(m,"add_to_cart",n)};return r.$$set=n=>{"data"in n&&a(0,i=n.data)},[i,g,_]}class rt extends Q{constructor(e){super(),U(this,e,st,at,j,{data:0})}}export{rt as default};
