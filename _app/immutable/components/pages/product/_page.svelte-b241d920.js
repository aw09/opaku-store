import{S as Q,i as j,s as z,T as K,e as F,b as T,U as W,B as I,h as u,P as X,k as g,q as E,l as b,m as v,r as D,n as f,I as n,a as R,c as B,Q as Y,J as Z,u as $}from"../../../chunks/index-b30536f4.js";import{r as G,g as J,b as tt,c as et,l as M,d as O,e as at}from"../../../chunks/firebase-c0b386ca.js";import{u as st}from"../../../chunks/state-9ea8d592.js";import{p as lt}from"../../../chunks/stores-b6bff587.js";function rt(r){let t,e=r[12].message+"",a;return{c(){t=g("h2"),a=E(e),this.h()},l(s){t=b(s,"H2",{class:!0});var o=v(t);a=D(o,e),o.forEach(u),this.h()},h(){f(t,"class","mx-auto text-xl")},m(s,o){T(s,t,o),n(t,a)},p:I,d(s){s&&u(t)}}}function ot(r){let t,e,a,s,o,c,y=r[1].name+"",d,m,_,k,L=r[1].price.toLocaleString()+"",P,A,l,i=r[0]?"Add to Cart":"Login first",w,C,q,N,H;return{c(){t=g("div"),e=g("img"),s=R(),o=g("div"),c=g("h1"),d=E(y),m=R(),_=g("p"),k=E("Rp "),P=E(L),A=R(),l=g("button"),w=E(i),this.h()},l(h){t=b(h,"DIV",{class:!0});var p=v(t);e=b(p,"IMG",{class:!0,src:!0,alt:!0}),s=B(p),o=b(p,"DIV",{class:!0});var x=v(o);c=b(x,"H1",{class:!0});var U=v(c);d=D(U,y),U.forEach(u),m=B(x),_=b(x,"P",{class:!0});var S=v(_);k=D(S,"Rp "),P=D(S,L),S.forEach(u),A=B(x),l=b(x,"BUTTON",{class:!0});var V=v(l);w=D(V,i),V.forEach(u),x.forEach(u),p.forEach(u),this.h()},h(){f(e,"class","h-48 w-48"),Y(e.src,a=r[1].image)||f(e,"src",a),f(e,"alt",r[1].name+"-image"),f(c,"class","font-bold text-xl text-black"),f(_,"class","text-2xl"),l.disabled=C=!r[0],f(l,"class",q="mt-4 py-2 w-full rounded-lg text-center font-bold "+(r[0]?"text-white bg-green-400":"text-gray-500 bg-gray-200")),f(o,"class","flex flex-col"),f(t,"class","flex py-4 gap-4")},m(h,p){T(h,t,p),n(t,e),n(t,s),n(t,o),n(o,c),n(c,d),n(o,m),n(o,_),n(_,k),n(_,P),n(o,A),n(o,l),n(l,w),N||(H=Z(l,"click",r[3]),N=!0)},p(h,p){p&1&&i!==(i=h[0]?"Add to Cart":"Login first")&&$(w,i),p&1&&C!==(C=!h[0])&&(l.disabled=C),p&1&&q!==(q="mt-4 py-2 w-full rounded-lg text-center font-bold "+(h[0]?"text-white bg-green-400":"text-gray-500 bg-gray-200"))&&f(l,"class",q)},d(h){h&&u(t),N=!1,H()}}}function nt(r){let t,e;return{c(){t=g("span"),e=E("Loading data...")},l(a){t=b(a,"SPAN",{});var s=v(t);e=D(s,"Loading data..."),s.forEach(u)},m(a,s){T(a,t,s),n(t,e)},p:I,d(a){a&&u(t)}}}function ct(r){let t,e={ctx:r,current:null,token:null,hasCatch:!0,pending:nt,then:ot,catch:rt,value:1,error:12};return K(r[2],e),{c(){t=F(),e.block.c()},l(a){t=F(),e.block.l(a)},m(a,s){T(a,t,s),e.block.m(a,e.anchor=s),e.mount=()=>t.parentNode,e.anchor=t},p(a,[s]){r=a,W(e,r,s)},i:I,o:I,d(a){a&&u(t),e.block.d(a),e.token=null,e=null}}}function it(r,t,e){let a;X(r,lt,l=>e(7,a=l));const s=a.url.searchParams.get("id");let o,c,y,d,m,k=(async()=>{const l=G(O,"products/"+s),i=(await J(l)).val();if(i)return L(),i;throw new Error("Product Not Found")})();st.subscribe(l=>{e(0,c=l)});const L=async()=>{o=tt(et),e(1,m=await k),y={item_id:s,item_name:m.name,price:m.price},d={...y,quantity:1},console.log(d),M(o,"select_item",y)},P=()=>{c||(window.location.href="login");const l={...d,image:m.image},i=G(O,"cart/"+c.uid+"/"+d.item_id);J(i).then(w=>{w.val()||(at(i,l),A())})},A=()=>{const l={currency:"IDR",value:d.price,items:[d]};M(o,"add_to_cart",l)};return[c,m,k,P]}class mt extends Q{constructor(t){super(),j(this,t,it,ct,z,{})}}export{mt as default};
