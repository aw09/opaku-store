import{S as ie,i as ue,s as fe,C as Q,w as ee,x as te,y as ae,D as ge,E as $e,f as G,t as J,z as se,F as ne,G as oe,a as q,H as ce,m as v,h as i,c as V,n as p,b as B,B as be,k as g,q as M,l as $,r as z,Q as he,I as c,J as me,u as re,K as Te,o as Ee,d as qe,U as Ve,g as Re}from"../../../chunks/index-a6d6efdd.js";import{g as we,a as De,r as Ie,e as ye,f as _e,l as Z,h as Se,i as Le,j as Be,k as Ae}from"../../../chunks/firebase-dc3cb49a.js";import{u as ke,a as Ce}from"../../../chunks/state-239d256a.js";import{I as xe}from"../../../chunks/IconBase-df18d10d.js";function He(n){let e,l,s;return{c(){e=oe("path"),l=q(),s=oe("path"),this.h()},l(t){e=ce(t,"path",{d:!0}),v(e).forEach(i),l=V(t),s=ce(t,"path",{d:!0}),v(s).forEach(i),this.h()},h(){p(e,"d","M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),p(s,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(t,a){B(t,e,a),B(t,l,a),B(t,s,a)},p:be,d(t){t&&i(e),t&&i(l),t&&i(s)}}}function Oe(n){let e,l;const s=[{viewBox:"0 0 512 512"},n[0]];let t={$$slots:{default:[He]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)t=Q(t,s[a]);return e=new xe({props:t}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,u){ae(e,a,u),l=!0},p(a,[u]){const d=u&1?ge(s,[s[0],$e(a[0])]):{};u&2&&(d.$$scope={dirty:u,ctx:a}),e.$set(d)},i(a){l||(G(e.$$.fragment,a),l=!0)},o(a){J(e.$$.fragment,a),l=!1},d(a){se(e,a)}}}function Me(n,e,l){return n.$$set=s=>{l(0,e=Q(Q({},e),ne(s)))},e=ne(e),[e]}class ze extends ie{constructor(e){super(),ue(this,e,Me,Oe,fe,{})}}function Pe(n){let e,l,s;return{c(){e=oe("path"),l=q(),s=oe("path"),this.h()},l(t){e=ce(t,"path",{d:!0}),v(e).forEach(i),l=V(t),s=ce(t,"path",{d:!0}),v(s).forEach(i),this.h()},h(){p(e,"d","M346.5 240H272v-74.5c0-8.8-7.2-16-16-16s-16 7.2-16 16V240h-74.5c-8.8 0-16 6-16 16s7.5 16 16 16H240v74.5c0 9.5 7 16 16 16s16-7.2 16-16V272h74.5c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),p(s,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(t,a){B(t,e,a),B(t,l,a),B(t,s,a)},p:be,d(t){t&&i(e),t&&i(l),t&&i(s)}}}function Ue(n){let e,l;const s=[{viewBox:"0 0 512 512"},n[0]];let t={$$slots:{default:[Pe]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)t=Q(t,s[a]);return e=new xe({props:t}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,u){ae(e,a,u),l=!0},p(a,[u]){const d=u&1?ge(s,[s[0],$e(a[0])]):{};u&2&&(d.$$scope={dirty:u,ctx:a}),e.$set(d)},i(a){l||(G(e.$$.fragment,a),l=!0)},o(a){J(e.$$.fragment,a),l=!1},d(a){se(e,a)}}}function je(n,e,l){return n.$$set=s=>{l(0,e=Q(Q({},e),ne(s)))},e=ne(e),[e]}class Ne extends ie{constructor(e){super(),ue(this,e,je,Ue,fe,{})}}function Ge(n){let e,l,s,t,a,u,d,f=n[0].item_name+"",S,I,y,_,w=n[0].price.toLocaleString()+"",k,A,b,E,C,R,Y,x,T=n[0].quantity+"",j,P,H,O,D,m,le;return R=new ze({}),O=new Ne({}),{c(){e=g("div"),l=g("img"),a=q(),u=g("div"),d=g("h1"),S=M(f),I=q(),y=g("p"),_=M("Rp "),k=M(w),A=q(),b=g("div"),E=g("div"),C=g("button"),ee(R.$$.fragment),Y=q(),x=g("p"),j=M(T),P=q(),H=g("button"),ee(O.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var o=v(e);l=$(o,"IMG",{class:!0,src:!0,alt:!0}),a=V(o),u=$(o,"DIV",{class:!0});var h=v(u);d=$(h,"H1",{class:!0});var N=v(d);S=z(N,f),N.forEach(i),I=V(h),y=$(h,"P",{});var L=v(y);_=z(L,"Rp "),k=z(L,w),L.forEach(i),h.forEach(i),A=V(o),b=$(o,"DIV",{});var F=v(b);E=$(F,"DIV",{id:!0,class:!0});var U=v(E);C=$(U,"BUTTON",{class:!0});var K=v(C);te(R.$$.fragment,K),K.forEach(i),Y=V(U),x=$(U,"P",{class:!0});var W=v(x);j=z(W,T),W.forEach(i),P=V(U),H=$(U,"BUTTON",{class:!0});var X=v(H);te(O.$$.fragment,X),X.forEach(i),U.forEach(i),F.forEach(i),o.forEach(i),this.h()},h(){p(l,"class","w-28 h-28 rounded-lg"),he(l.src,s=n[0].image)||p(l,"src",s),p(l,"alt",t=n[0].name+"-image"),p(d,"class","font-bold"),p(u,"class","grow"),p(C,"class","w-5"),p(x,"class","mx-auto"),p(H,"class","w-5"),p(E,"id","quantity-control"),p(E,"class","flex items-center w-20 md:w-24"),p(e,"class","flex gap-2")},m(r,o){B(r,e,o),c(e,l),c(e,a),c(e,u),c(u,d),c(d,S),c(u,I),c(u,y),c(y,_),c(y,k),c(e,A),c(e,b),c(b,E),c(E,C),ae(R,C,null),c(E,Y),c(E,x),c(x,j),c(E,P),c(E,H),ae(O,H,null),D=!0,m||(le=[me(C,"click",n[2]),me(H,"click",n[1])],m=!0)},p(r,[o]){(!D||o&1&&!he(l.src,s=r[0].image))&&p(l,"src",s),(!D||o&1&&t!==(t=r[0].name+"-image"))&&p(l,"alt",t),(!D||o&1)&&f!==(f=r[0].item_name+"")&&re(S,f),(!D||o&1)&&w!==(w=r[0].price.toLocaleString()+"")&&re(k,w),(!D||o&1)&&T!==(T=r[0].quantity+"")&&re(j,T)},i(r){D||(G(R.$$.fragment,r),G(O.$$.fragment,r),D=!0)},o(r){J(R.$$.fragment,r),J(O.$$.fragment,r),D=!1},d(r){r&&i(e),se(R),se(O),m=!1,Te(le)}}}function Ye(n,e,l){let s,{data:t}=e,a,u,d;Ee(()=>{a=we(De)}),ke.subscribe(I=>{u=I,d=Ie(ye,"cart/"+u.uid+"/"+t.item_id)});const f=()=>{l(0,t.quantity++,t),_e(d,t),Z(a,"add_to_cart",s)},S=()=>{if(l(0,t.quantity--,t),Z(a,"remove_from_cart",s),t.quantity==0)return Ce("You have removed this item from your cart"),Se(d);_e(d,t)};return n.$$set=I=>{"data"in I&&l(0,t=I.data)},n.$$.update=()=>{n.$$.dirty&1&&(s={currency:"IDR",value:t.quantity*t.price,items:[t]})},[t,f,S]}class Fe extends ie{constructor(e){super(),ue(this,e,Ye,Ge,fe,{data:0})}}function pe(n,e,l){const s=n.slice();return s[9]=e[l],s}function ve(n){let e,l;return e=new Fe({props:{data:n[9]}}),{c(){ee(e.$$.fragment)},l(s){te(e.$$.fragment,s)},m(s,t){ae(e,s,t),l=!0},p(s,t){const a={};t&1&&(a.data=s[9]),e.$set(a)},i(s){l||(G(e.$$.fragment,s),l=!0)},o(s){J(e.$$.fragment,s),l=!1},d(s){se(e,s)}}}function Je(n){let e,l,s,t,a,u,d,f,S,I,y,_,w,k,A,b,E,C=n[1].toLocaleString()+"",R,Y,x,T,j,P,H,O,D=n[0],m=[];for(let r=0;r<D.length;r+=1)m[r]=ve(pe(n,D,r));const le=r=>J(m[r],1,1,()=>{m[r]=null});return{c(){e=g("head"),l=g("title"),s=M("Cart"),t=q(),a=g("h1"),u=M("Cart"),d=q(),f=g("div");for(let r=0;r<m.length;r+=1)m[r].c();S=q(),I=g("div"),y=q(),_=g("div"),w=g("h1"),k=M("TOTAL"),A=q(),b=g("p"),E=M("Rp "),R=M(C),Y=q(),x=g("div"),T=g("button"),j=M("Checkout"),this.h()},l(r){e=$(r,"HEAD",{});var o=v(e);l=$(o,"TITLE",{});var h=v(l);s=z(h,"Cart"),h.forEach(i),o.forEach(i),t=V(r),a=$(r,"H1",{class:!0});var N=v(a);u=z(N,"Cart"),N.forEach(i),d=V(r),f=$(r,"DIV",{class:!0});var L=v(f);for(let de=0;de<m.length;de+=1)m[de].l(L);S=V(L),I=$(L,"DIV",{class:!0}),v(I).forEach(i),y=V(L),_=$(L,"DIV",{class:!0});var F=v(_);w=$(F,"H1",{class:!0});var U=v(w);k=z(U,"TOTAL"),U.forEach(i),A=V(F),b=$(F,"P",{});var K=v(b);E=z(K,"Rp "),R=z(K,C),K.forEach(i),F.forEach(i),Y=V(L),x=$(L,"DIV",{class:!0});var W=v(x);T=$(W,"BUTTON",{class:!0});var X=v(T);j=z(X,"Checkout"),X.forEach(i),W.forEach(i),L.forEach(i),this.h()},h(){p(a,"class","text-2xl pb-6"),p(I,"class","grow"),p(w,"class","grow"),p(_,"class","flex text-xl font-bold"),p(T,"class","text-xl bg-green-400 text-white font-bold px-4 py-2 rounded-lg"),p(x,"class","w-full flex justify-end mb-10"),p(f,"class","flex flex-col gap-2 w-full grow")},m(r,o){B(r,e,o),c(e,l),c(l,s),B(r,t,o),B(r,a,o),c(a,u),B(r,d,o),B(r,f,o);for(let h=0;h<m.length;h+=1)m[h].m(f,null);c(f,S),c(f,I),c(f,y),c(f,_),c(_,w),c(w,k),c(_,A),c(_,b),c(b,E),c(b,R),c(f,Y),c(f,x),c(x,T),c(T,j),P=!0,H||(O=me(T,"click",n[2]),H=!0)},p(r,[o]){if(o&1){D=r[0];let h;for(h=0;h<D.length;h+=1){const N=pe(r,D,h);m[h]?(m[h].p(N,o),G(m[h],1)):(m[h]=ve(N),m[h].c(),G(m[h],1),m[h].m(f,S))}for(Re(),h=D.length;h<m.length;h+=1)le(h);qe()}(!P||o&2)&&C!==(C=r[1].toLocaleString()+"")&&re(R,C)},i(r){if(!P){for(let o=0;o<D.length;o+=1)G(m[o]);P=!0}},o(r){m=m.filter(Boolean);for(let o=0;o<m.length;o+=1)J(m[o]);P=!1},d(r){r&&i(e),r&&i(t),r&&i(a),r&&i(d),r&&i(f),Ve(m,r),H=!1,O()}}}function Ke(n,e,l){let s,t=[],a=0,u,d,f;Ee(()=>{u=we(De)});const S=()=>{f=Ie(ye,"cart/"+s.uid);let _=!0;Le(f,w=>{y(w,{firstRender:_}),_=!1}),Be(f,w=>{y(w)}),Ae(f),Z(u,"view_cart",d)},I=()=>{Z(u,"begin_checkout",d),Z(u,"purchase",d),Se(f).finally(_=>{console.log(_),y(_)}),Ce("You have already checked out")},y=(_,w=!1)=>{const k=(_==null?void 0:_.val())||[];let A=[];if(Array.isArray(k))A=k;else for(let b in k)A[b]=k[b];l(0,t=A.filter(b=>b)),l(1,a=t.reduce((b,E)=>b+E.quantity*E.price,0)),d={currency:"IDR",value:a,items:t}};return ke.subscribe(_=>{s=_,s&&S()}),[t,a,I]}class et extends ie{constructor(e){super(),ue(this,e,Ke,Je,fe,{})}}export{et as default};
