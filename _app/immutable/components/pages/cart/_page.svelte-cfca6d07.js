import{S as re,i as ne,s as oe,C as K,w as X,x as Y,y as Z,D as $e,E as be,f as N,t as F,z as ee,F as ae,G as se,a as V,H as le,m as v,h as u,c as R,n as m,b as A,B as Ee,k as b,q as z,l as E,r as P,Q as pe,I as c,J as ce,u as te,K as ye,o as we,d as Ce,R as xe,g as qe}from"../../../chunks/index-b30536f4.js";import{b as Ie,c as De,r as ie,d as ue,e as fe,l as W,f as Ve,h as Re,i as Te,j as Be}from"../../../chunks/firebase-5e36bfb7.js";import{u as Se}from"../../../chunks/state-61cfcda4.js";import{I as ke}from"../../../chunks/IconBase-9e4d8c2c.js";function Le(n){let e,l,t;return{c(){e=se("path"),l=V(),t=se("path"),this.h()},l(a){e=le(a,"path",{d:!0}),v(e).forEach(u),l=R(a),t=le(a,"path",{d:!0}),v(t).forEach(u),this.h()},h(){m(e,"d","M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),m(t,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(a,s){A(a,e,s),A(a,l,s),A(a,t,s)},p:Ee,d(a){a&&u(e),a&&u(l),a&&u(t)}}}function Oe(n){let e,l;const t=[{viewBox:"0 0 512 512"},n[0]];let a={$$slots:{default:[Le]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=K(a,t[s]);return e=new ke({props:a}),{c(){X(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,o){Z(e,s,o),l=!0},p(s,[o]){const h=o&1?$e(t,[t[0],be(s[0])]):{};o&2&&(h.$$scope={dirty:o,ctx:s}),e.$set(h)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Ae(n,e,l){return n.$$set=t=>{l(0,e=K(K({},e),ae(t)))},e=ae(e),[e]}class He extends re{constructor(e){super(),ne(this,e,Ae,Oe,oe,{})}}function Me(n){let e,l,t;return{c(){e=se("path"),l=V(),t=se("path"),this.h()},l(a){e=le(a,"path",{d:!0}),v(e).forEach(u),l=R(a),t=le(a,"path",{d:!0}),v(t).forEach(u),this.h()},h(){m(e,"d","M346.5 240H272v-74.5c0-8.8-7.2-16-16-16s-16 7.2-16 16V240h-74.5c-8.8 0-16 6-16 16s7.5 16 16 16H240v74.5c0 9.5 7 16 16 16s16-7.2 16-16V272h74.5c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),m(t,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(a,s){A(a,e,s),A(a,l,s),A(a,t,s)},p:Ee,d(a){a&&u(e),a&&u(l),a&&u(t)}}}function ze(n){let e,l;const t=[{viewBox:"0 0 512 512"},n[0]];let a={$$slots:{default:[Me]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=K(a,t[s]);return e=new ke({props:a}),{c(){X(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,o){Z(e,s,o),l=!0},p(s,[o]){const h=o&1?$e(t,[t[0],be(s[0])]):{};o&2&&(h.$$scope={dirty:o,ctx:s}),e.$set(h)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Pe(n,e,l){return n.$$set=t=>{l(0,e=K(K({},e),ae(t)))},e=ae(e),[e]}class je extends re{constructor(e){super(),ne(this,e,Pe,ze,oe,{})}}function Ne(n){let e,l,t,a,s,o,h,_=n[0].item_name+"",k,y,T,w,I=n[0].price.toLocaleString()+"",D,x,S,p,C,B,H,L,j=n[0].quantity+"",q,d,M,r,f,i,O;return B=new He({}),r=new je({}),{c(){e=b("div"),l=b("img"),s=V(),o=b("div"),h=b("h1"),k=z(_),y=V(),T=b("p"),w=z("Rp "),D=z(I),x=V(),S=b("div"),p=b("div"),C=b("button"),X(B.$$.fragment),H=V(),L=b("p"),q=z(j),d=V(),M=b("button"),X(r.$$.fragment),this.h()},l(g){e=E(g,"DIV",{class:!0});var $=v(e);l=E($,"IMG",{class:!0,src:!0,alt:!0}),s=R($),o=E($,"DIV",{class:!0});var U=v(o);h=E(U,"H1",{class:!0});var Q=v(h);k=P(Q,_),Q.forEach(u),y=R(U),T=E(U,"P",{});var G=v(T);w=P(G,"Rp "),D=P(G,I),G.forEach(u),U.forEach(u),x=R($),S=E($,"DIV",{});var de=v(S);p=E(de,"DIV",{id:!0,class:!0});var J=v(p);C=E(J,"BUTTON",{class:!0});var he=v(C);Y(B.$$.fragment,he),he.forEach(u),H=R(J),L=E(J,"P",{class:!0});var me=v(L);q=P(me,j),me.forEach(u),d=R(J),M=E(J,"BUTTON",{class:!0});var _e=v(M);Y(r.$$.fragment,_e),_e.forEach(u),J.forEach(u),de.forEach(u),$.forEach(u),this.h()},h(){m(l,"class","w-28 h-28 rounded-lg"),pe(l.src,t=n[0].image)||m(l,"src",t),m(l,"alt",a=n[0].name+"-image"),m(h,"class","font-bold"),m(o,"class","grow"),m(C,"class","w-5"),m(L,"class","mx-auto"),m(M,"class","w-5"),m(p,"id","quantity-control"),m(p,"class","flex items-center w-20 md:w-24"),m(e,"class","flex gap-2")},m(g,$){A(g,e,$),c(e,l),c(e,s),c(e,o),c(o,h),c(h,k),c(o,y),c(o,T),c(T,w),c(T,D),c(e,x),c(e,S),c(S,p),c(p,C),Z(B,C,null),c(p,H),c(p,L),c(L,q),c(p,d),c(p,M),Z(r,M,null),f=!0,i||(O=[ce(C,"click",n[2]),ce(M,"click",n[1])],i=!0)},p(g,[$]){(!f||$&1&&!pe(l.src,t=g[0].image))&&m(l,"src",t),(!f||$&1&&a!==(a=g[0].name+"-image"))&&m(l,"alt",a),(!f||$&1)&&_!==(_=g[0].item_name+"")&&te(k,_),(!f||$&1)&&I!==(I=g[0].price.toLocaleString()+"")&&te(D,I),(!f||$&1)&&j!==(j=g[0].quantity+"")&&te(q,j)},i(g){f||(N(B.$$.fragment,g),N(r.$$.fragment,g),f=!0)},o(g){F(B.$$.fragment,g),F(r.$$.fragment,g),f=!1},d(g){g&&u(e),ee(B),ee(r),i=!1,ye(O)}}}function Ue(n,e,l){let{data:t}=e,a,s,o;const h={currency:"IDR",value:t.quantity*t.price,items:[t]};we(()=>{a=Ie(De)}),Se.subscribe(y=>{s=y,o=ie(ue,"cart/"+s.uid+"/"+t.item_id)});const _=()=>{l(0,t.quantity++,t),fe(o,t),W(a,"add_to_cart",h)},k=()=>{if(t.quantity==1)return W(a,"remove_from_cart",h),Ve(o);l(0,t.quantity--,t),fe(o,t),W(a,"add_to_cart",h)};return n.$$set=y=>{"data"in y&&l(0,t=y.data)},[t,_,k]}class Ge extends re{constructor(e){super(),ne(this,e,Ue,Ne,oe,{data:0})}}function ve(n,e,l){const t=n.slice();return t[9]=e[l],t}function ge(n){let e,l;return e=new Ge({props:{data:n[9]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){Z(e,t,a),l=!0},p(t,a){const s={};a&1&&(s.data=t[9]),e.$set(s)},i(t){l||(N(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function Fe(n){let e,l,t,a,s,o,h,_,k,y,T,w,I,D=n[1].toLocaleString()+"",x,S,p,C,B,H,L,j,q=n[0],d=[];for(let r=0;r<q.length;r+=1)d[r]=ge(ve(n,q,r));const M=r=>F(d[r],1,1,()=>{d[r]=null});return{c(){e=b("h1"),l=z("Cart"),t=V(),a=b("div");for(let r=0;r<d.length;r+=1)d[r].c();s=V(),o=b("div"),h=V(),_=b("div"),k=b("h1"),y=z("TOTAL"),T=V(),w=b("p"),I=z("Rp "),x=z(D),S=V(),p=b("div"),C=b("button"),B=z("Checkout"),this.h()},l(r){e=E(r,"H1",{class:!0});var f=v(e);l=P(f,"Cart"),f.forEach(u),t=R(r),a=E(r,"DIV",{class:!0});var i=v(a);for(let G=0;G<d.length;G+=1)d[G].l(i);s=R(i),o=E(i,"DIV",{class:!0}),v(o).forEach(u),h=R(i),_=E(i,"DIV",{class:!0});var O=v(_);k=E(O,"H1",{class:!0});var g=v(k);y=P(g,"TOTAL"),g.forEach(u),T=R(O),w=E(O,"P",{});var $=v(w);I=P($,"Rp "),x=P($,D),$.forEach(u),O.forEach(u),S=R(i),p=E(i,"DIV",{class:!0});var U=v(p);C=E(U,"BUTTON",{class:!0});var Q=v(C);B=P(Q,"Checkout"),Q.forEach(u),U.forEach(u),i.forEach(u),this.h()},h(){m(e,"class","text-2xl pb-6"),m(o,"class","grow"),m(k,"class","grow"),m(_,"class","flex text-xl font-bold"),m(C,"class","text-xl bg-green-400 text-white font-bold px-4 py-2 rounded-lg"),m(p,"class","w-full flex justify-end mb-10"),m(a,"class","flex flex-col gap-2 w-full grow")},m(r,f){A(r,e,f),c(e,l),A(r,t,f),A(r,a,f);for(let i=0;i<d.length;i+=1)d[i].m(a,null);c(a,s),c(a,o),c(a,h),c(a,_),c(_,k),c(k,y),c(_,T),c(_,w),c(w,I),c(w,x),c(a,S),c(a,p),c(p,C),c(C,B),H=!0,L||(j=ce(C,"click",n[2]),L=!0)},p(r,[f]){if(f&1){q=r[0];let i;for(i=0;i<q.length;i+=1){const O=ve(r,q,i);d[i]?(d[i].p(O,f),N(d[i],1)):(d[i]=ge(O),d[i].c(),N(d[i],1),d[i].m(a,s))}for(qe(),i=q.length;i<d.length;i+=1)M(i);Ce()}(!H||f&2)&&D!==(D=r[1].toLocaleString()+"")&&te(x,D)},i(r){if(!H){for(let f=0;f<q.length;f+=1)N(d[f]);H=!0}},o(r){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)F(d[f]);H=!1},d(r){r&&u(e),r&&u(t),r&&u(a),xe(d,r),L=!1,j()}}}function Je(n,e,l){let t,a=[],s=0,o,h,_;we(()=>{o=Ie(De)}),Se.subscribe(w=>{t=w,t&&k()});const k=()=>{_=ie(ue,"cart/"+t.uid),ie(ue,"cart/");let w=[],I=!0;Re(_,D=>{y(D,w,I),I=!1}),Te(_,D=>{y(D,w)}),Be(_)},y=(w,I,D=!1)=>{const x=w.val();if(Array.isArray(x))I=x;else for(let S in x)I[S]=x[S];l(0,a=I.filter(S=>S)),l(1,s=a.reduce((S,p)=>S+p.quantity*p.price,0)),h={currency:"IDR",value:s,items:a},D&&W(o,"view_cart",h)};return[a,s,()=>{fe(_,null),W(o,"begin_checkout",h)}]}class Ye extends re{constructor(e){super(),ne(this,e,Je,Fe,oe,{})}}export{Ye as default};
