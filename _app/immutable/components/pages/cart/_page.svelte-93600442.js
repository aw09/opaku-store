import{S as se,i as le,s as re,C as J,w as K,x as Q,y as W,D as ve,E as ge,f as P,t as N,z as X,F as ee,G as te,a as R,H as ae,m as _,h as u,c as T,n as h,b as L,B as $e,k as E,q as A,l as I,r as H,Q as de,I as i,J as he,u as Y,K as xe,o as be,d as ye,R as qe,g as Ve}from"../../../chunks/index-0cd3a35d.js";import{b as we,c as Ee,r as Ie,d as De,e as me,l as Z,f as Re,h as Te,i as ke}from"../../../chunks/firebase-c0b386ca.js";import{u as Se}from"../../../chunks/state-cc95885c.js";import{I as Ce}from"../../../chunks/IconBase-d95b2154.js";function Le(n){let e,l,t;return{c(){e=te("path"),l=R(),t=te("path"),this.h()},l(a){e=ae(a,"path",{d:!0}),_(e).forEach(u),l=T(a),t=ae(a,"path",{d:!0}),_(t).forEach(u),this.h()},h(){h(e,"d","M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),h(t,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(a,s){L(a,e,s),L(a,l,s),L(a,t,s)},p:$e,d(a){a&&u(e),a&&u(l),a&&u(t)}}}function Be(n){let e,l;const t=[{viewBox:"0 0 512 512"},n[0]];let a={$$slots:{default:[Le]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=J(a,t[s]);return e=new Ce({props:a}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,o){W(e,s,o),l=!0},p(s,[o]){const m=o&1?ve(t,[t[0],ge(s[0])]):{};o&2&&(m.$$scope={dirty:o,ctx:s}),e.$set(m)},i(s){l||(P(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){X(e,s)}}}function Oe(n,e,l){return n.$$set=t=>{l(0,e=J(J({},e),ee(t)))},e=ee(e),[e]}class Ae extends se{constructor(e){super(),le(this,e,Oe,Be,re,{})}}function He(n){let e,l,t;return{c(){e=te("path"),l=R(),t=te("path"),this.h()},l(a){e=ae(a,"path",{d:!0}),_(e).forEach(u),l=T(a),t=ae(a,"path",{d:!0}),_(t).forEach(u),this.h()},h(){h(e,"d","M346.5 240H272v-74.5c0-8.8-7.2-16-16-16s-16 7.2-16 16V240h-74.5c-8.8 0-16 6-16 16s7.5 16 16 16H240v74.5c0 9.5 7 16 16 16s16-7.2 16-16V272h74.5c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),h(t,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(a,s){L(a,e,s),L(a,l,s),L(a,t,s)},p:$e,d(a){a&&u(e),a&&u(l),a&&u(t)}}}function Me(n){let e,l;const t=[{viewBox:"0 0 512 512"},n[0]];let a={$$slots:{default:[He]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=J(a,t[s]);return e=new Ce({props:a}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,o){W(e,s,o),l=!0},p(s,[o]){const m=o&1?ve(t,[t[0],ge(s[0])]):{};o&2&&(m.$$scope={dirty:o,ctx:s}),e.$set(m)},i(s){l||(P(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){X(e,s)}}}function ze(n,e,l){return n.$$set=t=>{l(0,e=J(J({},e),ee(t)))},e=ee(e),[e]}class Pe extends se{constructor(e){super(),le(this,e,ze,Me,re,{})}}function Ne(n){let e,l,t,a,s,o,m,g=n[0].item_name+"",p,$,x,b,D=n[0].price.toLocaleString()+"",V,M,B,w,y,k,O,q,f=n[0].quantity+"",U,c,d,r,S,j,G;return k=new Ae({}),r=new Pe({}),{c(){e=E("div"),l=E("img"),s=R(),o=E("div"),m=E("h1"),p=A(g),$=R(),x=E("p"),b=A("Rp "),V=A(D),M=R(),B=E("div"),w=E("div"),y=E("button"),K(k.$$.fragment),O=R(),q=E("p"),U=A(f),c=R(),d=E("button"),K(r.$$.fragment),this.h()},l(v){e=I(v,"DIV",{class:!0});var C=_(e);l=I(C,"IMG",{class:!0,src:!0,alt:!0}),s=T(C),o=I(C,"DIV",{class:!0});var z=_(o);m=I(z,"H1",{class:!0});var oe=_(m);p=H(oe,g),oe.forEach(u),$=T(z),x=I(z,"P",{});var ne=_(x);b=H(ne,"Rp "),V=H(ne,D),ne.forEach(u),z.forEach(u),M=T(C),B=I(C,"DIV",{});var ce=_(B);w=I(ce,"DIV",{id:!0,class:!0});var F=_(w);y=I(F,"BUTTON",{class:!0});var ie=_(y);Q(k.$$.fragment,ie),ie.forEach(u),O=T(F),q=I(F,"P",{class:!0});var ue=_(q);U=H(ue,f),ue.forEach(u),c=T(F),d=I(F,"BUTTON",{class:!0});var fe=_(d);Q(r.$$.fragment,fe),fe.forEach(u),F.forEach(u),ce.forEach(u),C.forEach(u),this.h()},h(){h(l,"class","w-28 h-28 rounded-lg"),de(l.src,t=n[0].image)||h(l,"src",t),h(l,"alt",a=n[0].name+"-image"),h(m,"class","font-bold"),h(o,"class","grow"),h(y,"class","w-5"),h(q,"class","mx-auto"),h(d,"class","w-5"),h(w,"id","quantity-control"),h(w,"class","flex items-center w-20 md:w-24"),h(e,"class","flex gap-2")},m(v,C){L(v,e,C),i(e,l),i(e,s),i(e,o),i(o,m),i(m,p),i(o,$),i(o,x),i(x,b),i(x,V),i(e,M),i(e,B),i(B,w),i(w,y),W(k,y,null),i(w,O),i(w,q),i(q,U),i(w,c),i(w,d),W(r,d,null),S=!0,j||(G=[he(y,"click",n[2]),he(d,"click",n[1])],j=!0)},p(v,[C]){(!S||C&1&&!de(l.src,t=v[0].image))&&h(l,"src",t),(!S||C&1&&a!==(a=v[0].name+"-image"))&&h(l,"alt",a),(!S||C&1)&&g!==(g=v[0].item_name+"")&&Y(p,g),(!S||C&1)&&D!==(D=v[0].price.toLocaleString()+"")&&Y(V,D),(!S||C&1)&&f!==(f=v[0].quantity+"")&&Y(U,f)},i(v){S||(P(k.$$.fragment,v),P(r.$$.fragment,v),S=!0)},o(v){N(k.$$.fragment,v),N(r.$$.fragment,v),S=!1},d(v){v&&u(e),X(k),X(r),j=!1,xe(G)}}}function Ue(n,e,l){let{data:t}=e,a,s,o;const m={currency:"IDR",value:t.quantity*t.price,items:[t]};be(()=>{a=we(Ee)}),Se.subscribe($=>{s=$,o=Ie(De,"cart/"+s.uid+"/"+t.item_id)});const g=()=>{l(0,t.quantity++,t),me(o,t),Z(a,"add_to_cart",m)},p=()=>{if(t.quantity==1)return Z(a,"remove_from_cart",m),Re(o);l(0,t.quantity--,t),me(o,t),Z(a,"add_to_cart",m)};return n.$$set=$=>{"data"in $&&l(0,t=$.data)},[t,g,p]}class je extends se{constructor(e){super(),le(this,e,Ue,Ne,re,{data:0})}}function _e(n,e,l){const t=n.slice();return t[6]=e[l],t}function pe(n){let e,l;return e=new je({props:{data:n[6]}}),{c(){K(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,a){W(e,t,a),l=!0},p(t,a){const s={};a&1&&(s.data=t[6]),e.$set(s)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Ge(n){let e,l,t,a,s,o,m,g,p,$,x,b,D,V=n[1].toLocaleString()+"",M,B,w,y,k,O,q=n[0],f=[];for(let c=0;c<q.length;c+=1)f[c]=pe(_e(n,q,c));const U=c=>N(f[c],1,1,()=>{f[c]=null});return{c(){e=E("h1"),l=A("Cart"),t=R(),a=E("div");for(let c=0;c<f.length;c+=1)f[c].c();s=R(),o=E("div"),m=R(),g=E("div"),p=E("h1"),$=A("TOTAL"),x=R(),b=E("p"),D=A("Rp "),M=A(V),B=R(),w=E("div"),y=E("button"),k=A("Checkout"),this.h()},l(c){e=I(c,"H1",{class:!0});var d=_(e);l=H(d,"Cart"),d.forEach(u),t=T(c),a=I(c,"DIV",{class:!0});var r=_(a);for(let z=0;z<f.length;z+=1)f[z].l(r);s=T(r),o=I(r,"DIV",{class:!0}),_(o).forEach(u),m=T(r),g=I(r,"DIV",{class:!0});var S=_(g);p=I(S,"H1",{class:!0});var j=_(p);$=H(j,"TOTAL"),j.forEach(u),x=T(S),b=I(S,"P",{});var G=_(b);D=H(G,"Rp "),M=H(G,V),G.forEach(u),S.forEach(u),B=T(r),w=I(r,"DIV",{class:!0});var v=_(w);y=I(v,"BUTTON",{class:!0});var C=_(y);k=H(C,"Checkout"),C.forEach(u),v.forEach(u),r.forEach(u),this.h()},h(){h(e,"class","text-2xl pb-6"),h(o,"class","grow"),h(p,"class","grow"),h(g,"class","flex text-xl font-bold"),h(y,"class","text-xl bg-green-400 text-white font-bold px-4 py-2 rounded-lg"),h(w,"class","w-full flex justify-end mb-10"),h(a,"class","flex flex-col gap-2 w-full grow")},m(c,d){L(c,e,d),i(e,l),L(c,t,d),L(c,a,d);for(let r=0;r<f.length;r+=1)f[r].m(a,null);i(a,s),i(a,o),i(a,m),i(a,g),i(g,p),i(p,$),i(g,x),i(g,b),i(b,D),i(b,M),i(a,B),i(a,w),i(w,y),i(y,k),O=!0},p(c,[d]){if(d&1){q=c[0];let r;for(r=0;r<q.length;r+=1){const S=_e(c,q,r);f[r]?(f[r].p(S,d),P(f[r],1)):(f[r]=pe(S),f[r].c(),P(f[r],1),f[r].m(a,s))}for(Ve(),r=q.length;r<f.length;r+=1)U(r);ye()}(!O||d&2)&&V!==(V=c[1].toLocaleString()+"")&&Y(M,V)},i(c){if(!O){for(let d=0;d<q.length;d+=1)P(f[d]);O=!0}},o(c){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)N(f[d]);O=!1},d(c){c&&u(e),c&&u(t),c&&u(a),qe(f,c)}}}function Fe(n,e,l){let t,a=[],s=0,o;be(()=>{o=we(Ee)});const m=()=>{const p=Ie(De,"cart/"+t.uid);let $=[],x=!0;Te(p,b=>{g(b,$,x),x=!1}),ke(p,b=>{g(b,$)})},g=(p,$,x)=>{const b=p.val();if(Array.isArray(b))$=b;else for(let D in b)$[D]=b[D];l(0,a=$.filter(D=>D)),l(1,s=a.reduce((D,V)=>D+V.quantity*V.price,0)),x&&Z(o,"view_cart",{currency:"IDR",value:s,items:a})};return Se.subscribe(p=>{t=p,t&&m()}),[a,s]}class Xe extends se{constructor(e){super(),le(this,e,Fe,Ge,re,{})}}export{Xe as default};
