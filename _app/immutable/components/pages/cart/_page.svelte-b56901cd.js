import{S as re,i as ne,s as oe,C as J,w as Q,x as W,y as X,D as ve,E as ge,f as N,t as Y,z as Z,F as te,G as ae,a as V,H as se,m as g,h as u,c as T,n as h,b as A,B as $e,k as E,q as z,l as w,r as P,Q as me,I as c,J as ce,u as ee,K as xe,o as be,d as qe,R as Re,g as Ve}from"../../../chunks/index-b30536f4.js";import{g as Ee,e as we,r as De,d as Ie,f as he,l as le,h as ye,i as Te,j as Be,k as Le}from"../../../chunks/firebase-6ca424c3.js";import{u as Se,a as ke}from"../../../chunks/state-cb440c83.js";import{I as Ce}from"../../../chunks/IconBase-9e4d8c2c.js";function Oe(n){let e,l,s;return{c(){e=ae("path"),l=V(),s=ae("path"),this.h()},l(t){e=se(t,"path",{d:!0}),g(e).forEach(u),l=T(t),s=se(t,"path",{d:!0}),g(s).forEach(u),this.h()},h(){h(e,"d","M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),h(s,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(t,a){A(t,e,a),A(t,l,a),A(t,s,a)},p:$e,d(t){t&&u(e),t&&u(l),t&&u(s)}}}function Ae(n){let e,l;const s=[{viewBox:"0 0 512 512"},n[0]];let t={$$slots:{default:[Oe]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)t=J(t,s[a]);return e=new Ce({props:t}),{c(){Q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){X(e,a,o),l=!0},p(a,[o]){const m=o&1?ve(s,[s[0],ge(a[0])]):{};o&2&&(m.$$scope={dirty:o,ctx:a}),e.$set(m)},i(a){l||(N(e.$$.fragment,a),l=!0)},o(a){Y(e.$$.fragment,a),l=!1},d(a){Z(e,a)}}}function He(n,e,l){return n.$$set=s=>{l(0,e=J(J({},e),te(s)))},e=te(e),[e]}class Me extends re{constructor(e){super(),ne(this,e,He,Ae,oe,{})}}function ze(n){let e,l,s;return{c(){e=ae("path"),l=V(),s=ae("path"),this.h()},l(t){e=se(t,"path",{d:!0}),g(e).forEach(u),l=T(t),s=se(t,"path",{d:!0}),g(s).forEach(u),this.h()},h(){h(e,"d","M346.5 240H272v-74.5c0-8.8-7.2-16-16-16s-16 7.2-16 16V240h-74.5c-8.8 0-16 6-16 16s7.5 16 16 16H240v74.5c0 9.5 7 16 16 16s16-7.2 16-16V272h74.5c8.8 0 16-7.2 16-16s-7.2-16-16-16z"),h(s,"d","M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(t,a){A(t,e,a),A(t,l,a),A(t,s,a)},p:$e,d(t){t&&u(e),t&&u(l),t&&u(s)}}}function Pe(n){let e,l;const s=[{viewBox:"0 0 512 512"},n[0]];let t={$$slots:{default:[ze]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)t=J(t,s[a]);return e=new Ce({props:t}),{c(){Q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){X(e,a,o),l=!0},p(a,[o]){const m=o&1?ve(s,[s[0],ge(a[0])]):{};o&2&&(m.$$scope={dirty:o,ctx:a}),e.$set(m)},i(a){l||(N(e.$$.fragment,a),l=!0)},o(a){Y(e.$$.fragment,a),l=!1},d(a){Z(e,a)}}}function je(n,e,l){return n.$$set=s=>{l(0,e=J(J({},e),te(s)))},e=te(e),[e]}class Ne extends re{constructor(e){super(),ne(this,e,je,Pe,oe,{})}}function Ue(n){let e,l,s,t,a,o,m,_=n[0].item_name+"",I,k,C,p,x=n[0].price.toLocaleString()+"",y,q,D,v,S,B,H,L,j=n[0].quantity+"",R,d,M,r,f,i,O;return B=new Me({}),r=new Ne({}),{c(){e=E("div"),l=E("img"),a=V(),o=E("div"),m=E("h1"),I=z(_),k=V(),C=E("p"),p=z("Rp "),y=z(x),q=V(),D=E("div"),v=E("div"),S=E("button"),Q(B.$$.fragment),H=V(),L=E("p"),R=z(j),d=V(),M=E("button"),Q(r.$$.fragment),this.h()},l($){e=w($,"DIV",{class:!0});var b=g(e);l=w(b,"IMG",{class:!0,src:!0,alt:!0}),a=T(b),o=w(b,"DIV",{class:!0});var U=g(o);m=w(U,"H1",{class:!0});var K=g(m);I=P(K,_),K.forEach(u),k=T(U),C=w(U,"P",{});var G=g(C);p=P(G,"Rp "),y=P(G,x),G.forEach(u),U.forEach(u),q=T(b),D=w(b,"DIV",{});var ie=g(D);v=w(ie,"DIV",{id:!0,class:!0});var F=g(v);S=w(F,"BUTTON",{class:!0});var ue=g(S);W(B.$$.fragment,ue),ue.forEach(u),H=T(F),L=w(F,"P",{class:!0});var fe=g(L);R=P(fe,j),fe.forEach(u),d=T(F),M=w(F,"BUTTON",{class:!0});var de=g(M);W(r.$$.fragment,de),de.forEach(u),F.forEach(u),ie.forEach(u),b.forEach(u),this.h()},h(){h(l,"class","w-28 h-28 rounded-lg"),me(l.src,s=n[0].image)||h(l,"src",s),h(l,"alt",t=n[0].name+"-image"),h(m,"class","font-bold"),h(o,"class","grow"),h(S,"class","w-5"),h(L,"class","mx-auto"),h(M,"class","w-5"),h(v,"id","quantity-control"),h(v,"class","flex items-center w-20 md:w-24"),h(e,"class","flex gap-2")},m($,b){A($,e,b),c(e,l),c(e,a),c(e,o),c(o,m),c(m,I),c(o,k),c(o,C),c(C,p),c(C,y),c(e,q),c(e,D),c(D,v),c(v,S),X(B,S,null),c(v,H),c(v,L),c(L,R),c(v,d),c(v,M),X(r,M,null),f=!0,i||(O=[ce(S,"click",n[2]),ce(M,"click",n[1])],i=!0)},p($,[b]){(!f||b&1&&!me(l.src,s=$[0].image))&&h(l,"src",s),(!f||b&1&&t!==(t=$[0].name+"-image"))&&h(l,"alt",t),(!f||b&1)&&_!==(_=$[0].item_name+"")&&ee(I,_),(!f||b&1)&&x!==(x=$[0].price.toLocaleString()+"")&&ee(y,x),(!f||b&1)&&j!==(j=$[0].quantity+"")&&ee(R,j)},i($){f||(N(B.$$.fragment,$),N(r.$$.fragment,$),f=!0)},o($){Y(B.$$.fragment,$),Y(r.$$.fragment,$),f=!1},d($){$&&u(e),Z(B),Z(r),i=!1,xe(O)}}}function Ge(n,e,l){let s,{data:t}=e,a,o,m;be(()=>{a=Ee(we)}),Se.subscribe(k=>{o=k,m=De(Ie,"cart/"+o.uid+"/"+t.item_id)});const _=()=>{l(0,t.quantity++,t),he(m,t),le(a,"add_to_cart",s)},I=()=>{if(l(0,t.quantity--,t),le(a,"remove_from_cart",s),t.quantity==0)return ke("You have removed this item from your cart"),ye(m);he(m,t)};return n.$$set=k=>{"data"in k&&l(0,t=k.data)},n.$$.update=()=>{n.$$.dirty&1&&(s={currency:"IDR",value:t.quantity*t.price,items:[t]})},[t,_,I]}class Ye extends re{constructor(e){super(),ne(this,e,Ge,Ue,oe,{data:0})}}function _e(n,e,l){const s=n.slice();return s[9]=e[l],s}function pe(n){let e,l;return e=new Ye({props:{data:n[9]}}),{c(){Q(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,t){X(e,s,t),l=!0},p(s,t){const a={};t&1&&(a.data=s[9]),e.$set(a)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){Y(e.$$.fragment,s),l=!1},d(s){Z(e,s)}}}function Fe(n){let e,l,s,t,a,o,m,_,I,k,C,p,x,y=n[1].toLocaleString()+"",q,D,v,S,B,H,L,j,R=n[0],d=[];for(let r=0;r<R.length;r+=1)d[r]=pe(_e(n,R,r));const M=r=>Y(d[r],1,1,()=>{d[r]=null});return{c(){e=E("h1"),l=z("Cart"),s=V(),t=E("div");for(let r=0;r<d.length;r+=1)d[r].c();a=V(),o=E("div"),m=V(),_=E("div"),I=E("h1"),k=z("TOTAL"),C=V(),p=E("p"),x=z("Rp "),q=z(y),D=V(),v=E("div"),S=E("button"),B=z("Checkout"),this.h()},l(r){e=w(r,"H1",{class:!0});var f=g(e);l=P(f,"Cart"),f.forEach(u),s=T(r),t=w(r,"DIV",{class:!0});var i=g(t);for(let G=0;G<d.length;G+=1)d[G].l(i);a=T(i),o=w(i,"DIV",{class:!0}),g(o).forEach(u),m=T(i),_=w(i,"DIV",{class:!0});var O=g(_);I=w(O,"H1",{class:!0});var $=g(I);k=P($,"TOTAL"),$.forEach(u),C=T(O),p=w(O,"P",{});var b=g(p);x=P(b,"Rp "),q=P(b,y),b.forEach(u),O.forEach(u),D=T(i),v=w(i,"DIV",{class:!0});var U=g(v);S=w(U,"BUTTON",{class:!0});var K=g(S);B=P(K,"Checkout"),K.forEach(u),U.forEach(u),i.forEach(u),this.h()},h(){h(e,"class","text-2xl pb-6"),h(o,"class","grow"),h(I,"class","grow"),h(_,"class","flex text-xl font-bold"),h(S,"class","text-xl bg-green-400 text-white font-bold px-4 py-2 rounded-lg"),h(v,"class","w-full flex justify-end mb-10"),h(t,"class","flex flex-col gap-2 w-full grow")},m(r,f){A(r,e,f),c(e,l),A(r,s,f),A(r,t,f);for(let i=0;i<d.length;i+=1)d[i].m(t,null);c(t,a),c(t,o),c(t,m),c(t,_),c(_,I),c(I,k),c(_,C),c(_,p),c(p,x),c(p,q),c(t,D),c(t,v),c(v,S),c(S,B),H=!0,L||(j=ce(S,"click",n[2]),L=!0)},p(r,[f]){if(f&1){R=r[0];let i;for(i=0;i<R.length;i+=1){const O=_e(r,R,i);d[i]?(d[i].p(O,f),N(d[i],1)):(d[i]=pe(O),d[i].c(),N(d[i],1),d[i].m(t,a))}for(Ve(),i=R.length;i<d.length;i+=1)M(i);qe()}(!H||f&2)&&y!==(y=r[1].toLocaleString()+"")&&ee(q,y)},i(r){if(!H){for(let f=0;f<R.length;f+=1)N(d[f]);H=!0}},o(r){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)Y(d[f]);H=!1},d(r){r&&u(e),r&&u(s),r&&u(t),Re(d,r),L=!1,j()}}}function Je(n,e,l){let s,t=[],a=0,o,m,_;be(()=>{o=Ee(we)});const I=()=>{_=De(Ie,"cart/"+s.uid);let p=!0;Te(_,x=>{C(x,{firstRender:p}),p=!1}),Be(_,x=>{C(x)}),Le(_),le(o,"view_cart",m)},k=()=>{le(o,"begin_checkout",m),ye(_).finally(p=>{console.log(p),C(p)}),ke("You have already checked out")},C=(p,x=!1)=>{const y=(p==null?void 0:p.val())||[];let q=[];if(Array.isArray(y))q=y;else for(let D in y)q[D]=y[D];l(0,t=q.filter(D=>D)),l(1,a=t.reduce((D,v)=>D+v.quantity*v.price,0)),m={currency:"IDR",value:a,items:t}};return Se.subscribe(p=>{s=p,s&&I()}),[t,a,k]}class Ze extends re{constructor(e){super(),ne(this,e,Je,Fe,oe,{})}}export{Ze as default};
