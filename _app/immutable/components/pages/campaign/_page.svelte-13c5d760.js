import{S as V,i as F,s as G,T as J,e as B,b as E,U as Q,B as N,h as l,P as R,k as h,q as P,l as f,m as v,r as C,n as b,I as p,a as L,c as A,Q as j,J as z}from"../../../chunks/index-b30536f4.js";import{r as M,c as S,d as $,g as K,e as W,l as O}from"../../../chunks/firebase-6ca424c3.js";import{b as X}from"../../../chunks/paths-6cd3a76e.js";import{p as Y}from"../../../chunks/stores-b6bff587.js";function Z(n){let t,a=n[12].message+"",e;return{c(){t=h("h2"),e=P(a),this.h()},l(o){t=f(o,"H2",{class:!0});var s=v(t);e=C(s,a),s.forEach(l),this.h()},h(){b(t,"class","mx-auto text-xl")},m(o,s){E(o,t,s),p(t,e)},p:N,d(o){o&&l(t)}}}function tt(n){let t,a,e,o,s,y=n[11].campaign.name+"",g,c,d,H=n[11].campaign.description+"",m,u,_,w=n[11].campaign.cta+"",k,D,x;return{c(){t=h("div"),a=h("img"),o=L(),s=h("h1"),g=P(y),c=L(),d=h("p"),m=L(),u=h("div"),_=h("button"),k=P(w),this.h()},l(r){t=f(r,"DIV",{class:!0});var i=v(t);a=f(i,"IMG",{src:!0,alt:!0}),o=A(i),s=f(i,"H1",{class:!0});var I=v(s);g=C(I,y),I.forEach(l),c=A(i),d=f(i,"P",{});var U=v(d);U.forEach(l),i.forEach(l),m=A(r),u=f(r,"DIV",{class:!0});var T=v(u);_=f(T,"BUTTON",{class:!0});var q=v(_);k=C(q,w),q.forEach(l),T.forEach(l),this.h()},h(){j(a.src,e=n[11].campaign.image)||b(a,"src",e),b(a,"alt",n[11].campaign.name+"-image"),b(s,"class","pt-14 pb-6 text-3xl font-bold"),b(t,"class","flex flex-col"),b(_,"class","py-2 w-full rounded-lg bg-green-400 text-white text-2xl font-bold"),b(u,"class","py-8")},m(r,i){E(r,t,i),p(t,a),p(t,o),p(t,s),p(s,g),p(t,c),p(t,d),d.innerHTML=H,E(r,m,i),E(r,u,i),p(u,_),p(_,k),D||(x=z(_,"click",n[1]),D=!0)},p:N,d(r){r&&l(t),r&&l(m),r&&l(u),D=!1,x()}}}function at(n){let t,a;return{c(){t=h("span"),a=P("Loading data...")},l(e){t=f(e,"SPAN",{});var o=v(t);a=C(o,"Loading data..."),o.forEach(l)},m(e,o){E(e,t,o),p(t,a)},p:N,d(e){e&&l(t)}}}function et(n){let t,a={ctx:n,current:null,token:null,hasCatch:!0,pending:at,then:tt,catch:Z,value:11,error:12};return J(n[0],a),{c(){t=B(),a.block.c()},l(e){t=B(),a.block.l(e)},m(e,o){E(e,t,o),a.block.m(e,a.anchor=o),a.mount=()=>t.parentNode,a.anchor=t},p(e,[o]){n=e,Q(a,n,o)},i:N,o:N,d(e){e&&l(t),a.block.d(e),a.token=null,a=null}}}function ot(n,t,a){let e;R(n,Y,w=>a(7,e=w));const o=e.url.searchParams.get("id");let s,y,g,c,d;const m=(async()=>{const w=M($,"campaign/"+o),k=(await S(w)).val(),D=M($,"products/"+k.product_id),x=(await S(D)).val();if(x)return u(),{campaign:k,product:x};throw new Error("Campaign Not Found")})(),u=async()=>{s=K(W),c=(await m).campaign,d=(await m).product,y={item_id:c.product_id,item_name:d.name,price:d.price},g={promotion_id:o,promotion_name:c.name,location_id:"HOME_BANNER",items:[y]},O(s,"view_promotion",g)};return[m,()=>{O(s,"select_promotion",g),window.location.href=X+"/product?id="+(c==null?void 0:c.product_id)}]}class ct extends V{constructor(t){super(),F(this,t,ot,et,G,{})}}export{ct as default};
