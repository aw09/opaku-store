import{S as V,i as F,s as G,T as J,e as B,b as E,U as Q,B as N,h as s,P as R,k as h,q as P,l as f,m as v,r as C,n as b,I as p,a as L,c as A,Q as j,J as z}from"../../../chunks/index-b30536f4.js";import{r as M,g as S,d as $,b as K,c as W,l as O}from"../../../chunks/firebase-c0b386ca.js";import{p as X}from"../../../chunks/stores-b6bff587.js";function Y(o){let t,a=o[12].message+"",e;return{c(){t=h("h2"),e=P(a),this.h()},l(n){t=f(n,"H2",{class:!0});var l=v(t);e=C(l,a),l.forEach(s),this.h()},h(){b(t,"class","mx-auto text-xl")},m(n,l){E(n,t,l),p(t,e)},p:N,d(n){n&&s(t)}}}function Z(o){let t,a,e,n,l,y=o[11].campaign.name+"",g,c,d,H=o[11].campaign.description+"",m,u,_,w=o[11].campaign.cta+"",k,D,x;return{c(){t=h("div"),a=h("img"),n=L(),l=h("h1"),g=P(y),c=L(),d=h("p"),m=L(),u=h("div"),_=h("button"),k=P(w),this.h()},l(r){t=f(r,"DIV",{class:!0});var i=v(t);a=f(i,"IMG",{src:!0,alt:!0}),n=A(i),l=f(i,"H1",{class:!0});var I=v(l);g=C(I,y),I.forEach(s),c=A(i),d=f(i,"P",{});var U=v(d);U.forEach(s),i.forEach(s),m=A(r),u=f(r,"DIV",{class:!0});var T=v(u);_=f(T,"BUTTON",{class:!0});var q=v(_);k=C(q,w),q.forEach(s),T.forEach(s),this.h()},h(){j(a.src,e=o[11].campaign.image)||b(a,"src",e),b(a,"alt",o[11].campaign.name+"-image"),b(l,"class","pt-14 pb-6 text-3xl font-bold"),b(t,"class","flex flex-col"),b(_,"class","py-2 w-full rounded-lg bg-green-400 text-white text-2xl font-bold"),b(u,"class","py-8")},m(r,i){E(r,t,i),p(t,a),p(t,n),p(t,l),p(l,g),p(t,c),p(t,d),d.innerHTML=H,E(r,m,i),E(r,u,i),p(u,_),p(_,k),D||(x=z(_,"click",o[1]),D=!0)},p:N,d(r){r&&s(t),r&&s(m),r&&s(u),D=!1,x()}}}function tt(o){let t,a;return{c(){t=h("span"),a=P("Loading data...")},l(e){t=f(e,"SPAN",{});var n=v(t);a=C(n,"Loading data..."),n.forEach(s)},m(e,n){E(e,t,n),p(t,a)},p:N,d(e){e&&s(t)}}}function at(o){let t,a={ctx:o,current:null,token:null,hasCatch:!0,pending:tt,then:Z,catch:Y,value:11,error:12};return J(o[0],a),{c(){t=B(),a.block.c()},l(e){t=B(),a.block.l(e)},m(e,n){E(e,t,n),a.block.m(e,a.anchor=n),a.mount=()=>t.parentNode,a.anchor=t},p(e,[n]){o=e,Q(a,o,n)},i:N,o:N,d(e){e&&s(t),a.block.d(e),a.token=null,a=null}}}function et(o,t,a){let e;R(o,X,w=>a(7,e=w));const n=e.url.searchParams.get("id");let l,y,g,c,d;const m=(async()=>{const w=M($,"campaign/"+n),k=(await S(w)).val(),D=M($,"products/"+k.product_id),x=(await S(D)).val();if(x)return u(),{campaign:k,product:x};throw new Error("Campaign Not Found")})(),u=async()=>{l=K(W),c=(await m).campaign,d=(await m).product,y={item_id:c.product_id,item_name:d.name,price:d.price},g={promotion_id:n,promotion_name:c.name,location_id:"HOME_BANNER",items:[y]},O(l,"view_promotion",g)};return[m,()=>{O(l,"select_promotion",g),window.location.href="product?id="+(c==null?void 0:c.product_id)}]}class st extends V{constructor(t){super(),F(this,t,et,at,G,{})}}export{st as default};
