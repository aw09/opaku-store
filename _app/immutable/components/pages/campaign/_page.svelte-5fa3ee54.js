import{S as V,i as F,s as G,R as J,k as _,q as C,a as P,e as B,l as f,m as v,r as L,h as c,c as T,b as E,I as d,T as Q,B as N,P as U,n as w,Q as j,J as z}from"../../../chunks/index-a6d6efdd.js";import{r as M,d as S,e as $,g as K,a as W,l as O}from"../../../chunks/firebase-dc3cb49a.js";import{b as X}from"../../../chunks/paths-6cd3a76e.js";import{p as Y}from"../../../chunks/stores-70726012.js";function Z(i){let t,o=i[12].message+"",s;return{c(){t=_("h2"),s=C(o),this.h()},l(e){t=f(e,"H2",{class:!0});var l=v(t);s=L(l,o),l.forEach(c),this.h()},h(){w(t,"class","mx-auto text-xl")},m(e,l){E(e,t,l),d(t,s)},p:N,d(e){e&&c(t)}}}function tt(i){let t,o,s,e,l,r=i[11].campaign.name+"",a,n,p,A=i[11].campaign.description+"",b,h,g,k=i[11].campaign.cta+"",D,y,x;return{c(){t=_("div"),o=_("img"),e=P(),l=_("h1"),a=C(r),n=P(),p=_("p"),b=P(),h=_("div"),g=_("button"),D=C(k),this.h()},l(m){t=f(m,"DIV",{class:!0});var u=v(t);o=f(u,"IMG",{src:!0,alt:!0}),e=T(u),l=f(u,"H1",{class:!0});var H=v(l);a=L(H,r),H.forEach(c),n=T(u),p=f(u,"P",{});var R=v(p);R.forEach(c),u.forEach(c),b=T(m),h=f(m,"DIV",{class:!0});var I=v(h);g=f(I,"BUTTON",{class:!0});var q=v(g);D=L(q,k),q.forEach(c),I.forEach(c),this.h()},h(){j(o.src,s=i[11].campaign.image)||w(o,"src",s),w(o,"alt",i[11].campaign.name+"-image"),w(l,"class","pt-14 pb-6 text-3xl font-bold"),w(t,"class","flex flex-col"),w(g,"class","py-2 w-full rounded-lg bg-green-400 text-white text-2xl font-bold"),w(h,"class","py-8")},m(m,u){E(m,t,u),d(t,o),d(t,e),d(t,l),d(l,a),d(t,n),d(t,p),p.innerHTML=A,E(m,b,u),E(m,h,u),d(h,g),d(g,D),y||(x=z(g,"click",i[1]),y=!0)},p:N,d(m){m&&c(t),m&&c(b),m&&c(h),y=!1,x()}}}function at(i){let t,o;return{c(){t=_("span"),o=C("Loading data...")},l(s){t=f(s,"SPAN",{});var e=v(t);o=L(e,"Loading data..."),e.forEach(c)},m(s,e){E(s,t,e),d(t,o)},p:N,d(s){s&&c(t)}}}function et(i){let t,o,s,e,l,r={ctx:i,current:null,token:null,hasCatch:!0,pending:at,then:tt,catch:Z,value:11,error:12};return J(i[0],r),{c(){t=_("head"),o=_("title"),s=C("Campaign Detail"),e=P(),l=B(),r.block.c()},l(a){t=f(a,"HEAD",{});var n=v(t);o=f(n,"TITLE",{});var p=v(o);s=L(p,"Campaign Detail"),p.forEach(c),n.forEach(c),e=T(a),l=B(),r.block.l(a)},m(a,n){E(a,t,n),d(t,o),d(o,s),E(a,e,n),E(a,l,n),r.block.m(a,r.anchor=n),r.mount=()=>l.parentNode,r.anchor=l},p(a,[n]){i=a,Q(r,i,n)},i:N,o:N,d(a){a&&c(t),a&&c(e),a&&c(l),r.block.d(a),r.token=null,r=null}}}function lt(i,t,o){let s;U(i,Y,k=>o(7,s=k));const e=s.url.searchParams.get("id");let l,r,a,n,p;const b=(async()=>{const k=M($,"campaign/"+e),D=(await S(k)).val(),y=M($,"products/"+D.product_id),x=(await S(y)).val();if(x)return h(),{campaign:D,product:x};throw new Error("Campaign Not Found")})(),h=async()=>{l=K(W),n=(await b).campaign,p=(await b).product,r={item_id:n.product_id,item_name:p.name,price:p.price},a={promotion_id:e,promotion_name:n.name,location_id:"HOME_BANNER",items:[r]},O(l,"view_promotion",a)};return[b,()=>{O(l,"select_promotion",a),window.location.href=X+"/product?id="+(n==null?void 0:n.product_id)}]}class rt extends V{constructor(t){super(),F(this,t,lt,et,G,{})}}export{rt as default};
